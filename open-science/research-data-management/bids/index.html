
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mydomain.org/mysite/open-science/research-data-management/bids/">
      
      
        <link rel="prev" href="../planning/">
      
      
        <link rel="next" href="../publish/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.39">
    
    
      
        <title>BIDS - Ipsy Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8c3ca2c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bids" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Ipsy Docs" class="md-header__button md-logo" aria-label="Ipsy Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ipsy Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              BIDS
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../getting-started/" class="md-tabs__link">
          
  
  Open Science

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../cluster/" class="md-tabs__link">
          
  
  Cluster

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../qanda/" class="md-tabs__link">
        
  
    
  
  Q&A

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Ipsy Docs" class="md-nav__button md-logo" aria-label="Ipsy Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Ipsy Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Open Science
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Open Science
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Research Data Management
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Research Data Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../planning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plan you data management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    BIDS
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    BIDS
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-bids" class="md-nav__link">
    <span class="md-ellipsis">
      Why BIDS?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-bids" class="md-nav__link">
    <span class="md-ellipsis">
      How to BIDS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to BIDS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-heudiconv-to-convert-fmri-data-to-bids" class="md-nav__link">
    <span class="md-ellipsis">
      Using heudiconv to convert fMRI data to BIDS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eeg-bids-recommended-formats" class="md-nav__link">
    <span class="md-ellipsis">
      EEG BIDS recommended formats
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eeg-conversion-with-fieldtrip-matlab-based" class="md-nav__link">
    <span class="md-ellipsis">
      EEG conversion with Fieldtrip (Matlab based)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eeg-conversion-with-mne-python-based" class="md-nav__link">
    <span class="md-ellipsis">
      EEG conversion with MNE (Python based)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#behavioral-data" class="md-nav__link">
    <span class="md-ellipsis">
      Behavioral data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#physiological-data" class="md-nav__link">
    <span class="md-ellipsis">
      Physiological data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#populating-metadata-files" class="md-nav__link">
    <span class="md-ellipsis">
      Populating metadata files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validate-your-bids-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Validate your BIDS dataset
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../publish/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publish your data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../archive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Archive your data
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Code Management
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Code Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-management/good-practices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Good Coding practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code-management/sharing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sharing code
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Analysis Management
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Data Analysis Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analysis-management/data-analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data analysis
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cluster
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Cluster
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cecile
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Cecile
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cluster/cecile/access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing Cecile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cluster/cecile/data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data organization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cluster/cecile/slurm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Slurm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cluster/cecile/software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software stack
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Medusa
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Medusa
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cluster/medusa/access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accessing Medusa
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cluster/medusa/data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data organization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cluster/medusa/condor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Condor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cluster/medusa/software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software stack
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../qanda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Q&A
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-bids" class="md-nav__link">
    <span class="md-ellipsis">
      Why BIDS?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-bids" class="md-nav__link">
    <span class="md-ellipsis">
      How to BIDS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to BIDS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-heudiconv-to-convert-fmri-data-to-bids" class="md-nav__link">
    <span class="md-ellipsis">
      Using heudiconv to convert fMRI data to BIDS
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eeg-bids-recommended-formats" class="md-nav__link">
    <span class="md-ellipsis">
      EEG BIDS recommended formats
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eeg-conversion-with-fieldtrip-matlab-based" class="md-nav__link">
    <span class="md-ellipsis">
      EEG conversion with Fieldtrip (Matlab based)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eeg-conversion-with-mne-python-based" class="md-nav__link">
    <span class="md-ellipsis">
      EEG conversion with MNE (Python based)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#behavioral-data" class="md-nav__link">
    <span class="md-ellipsis">
      Behavioral data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#physiological-data" class="md-nav__link">
    <span class="md-ellipsis">
      Physiological data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#populating-metadata-files" class="md-nav__link">
    <span class="md-ellipsis">
      Populating metadata files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validate-your-bids-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Validate your BIDS dataset
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="bids">BIDS</h1>
<p>If you are following the project workflow, by now you should have a project set up on the cluster and you might be in the process of organizing your <strong>raw data</strong>. The next step is to convert your data into BIDS format.</p>
<p><a href="https://bids.neuroimaging.io/get_started.html"><strong>BIDS</strong></a> is an acronym that stands for <strong>Brain Imaging Data Structure</strong>. It is a standardized format for the organization and the description of neuroscientific data (see the schema below).</b><br />
In a nutshell, BIDS provides a framework for standardizing file names, folder structures and metadata for different kinds of data such as neuroimaging, behavioral, physiological etc.<br />
We recommend you to go through the <a href="https://bids-specification.readthedocs.io/en/stable/">BIDS specification page</a> and <a href="https://bids-standard.github.io/bids-starter-kit/">BIDS Starter Kit pages</a> to understand more in depth the concepts and the phylosophy behind BIDS.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>.
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>├──<span class="w"> </span>CHANGES
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>├──<span class="w"> </span>dataset_description.json
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>├──<span class="w"> </span>participants.tsv
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>├──<span class="w"> </span>README
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>└──<span class="w"> </span>sub-01
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span>├──<span class="w"> </span>anat
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span>│<span class="w">   </span>├──<span class="w"> </span>sub-01_T2starw.nii.gz
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">    </span>│<span class="w">   </span>└──<span class="w"> </span>sub-01_T1W.nii.gz
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">    </span>├──<span class="w"> </span>func
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">    </span>│<span class="w">   </span>├──<span class="w"> </span>sub-01_task-mybrillianttask_bold.nii.gz
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">    </span>│<span class="w">   </span>└──<span class="w"> </span>sub-01_task-mybrillianttask_events.tsv
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">    </span>└──<span class="w"> </span>task-mybrillianttask_bold.json
</code></pre></div>
<h2 id="why-bids">Why BIDS?</h2>
<ul>
<li>It provides a logical and intelligible structure for data of different kinds.</li>
<li>It makes your data clear and reusable by other researchers, thus increasing the chance of collaborations and the chance of being cited.</li>
<li>It helps you to organize your data without coming up by yourself with an efficient and flexible structure.</li>
<li>It has been adopted by all the major tools for neuroscientific analysis.</li>
<li>It improves science and also your science. </li>
</ul>
<h2 id="how-to-bids">How to BIDS</h2>
<p>In the following tabs, we explain how to convert your <strong>unprocessed raw data</strong> into BIDS for different modalities. We focus only on specific tools that are either widely used or provide some advantages for the users.</p>
<p>Before you start converting your data we strongly recommend to go through the <a href="https://bids-specification.readthedocs.io/en/stable/">BIDS specification page</a> relative to your modalities of interest. Make sure you read the <a href="https://bids-specification.readthedocs.io/en/stable/common-principles.html">common principles</a> to grasp the jargon used for BIDS.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">fMRI</label><label for="__tabbed_1_2">EEG/MEG</label><label for="__tabbed_1_3">Behavioral/Physiological</label><label for="__tabbed_1_4">Eye-tracking</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<h3 id="using-heudiconv-to-convert-fmri-data-to-bids">Using heudiconv to convert fMRI data to BIDS</h3>
<p><a href="https://heudiconv.readthedocs.io/en/latest/">Heudiconv</a> is a python library which helps you to convert f/MRI data to BIDS with little effort. You do not need to be very proficient in python to use it, although some basics would help you. You can either follow this brief tutorial or use the <a href="https://heudiconv.readthedocs.io/en/latest/tutorials.html">tutorials</a> provided by the heudiconv developers and users.</p>
<p><strong>Step 1</strong></p>
<p>In order to convert correctly your data, heudiconv leverages on so called heuristics.</b>   <br />
Heuristics are rules that you provide to the software to specify which files you would like to convert.</p>
<p>You must specify such rules within a python script that is then passed to heudiconv. You do not need to create this script from scratch, you can generate a template by running the following line on the terminal:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>heudiconv<span class="w"> </span>--files<span class="w"> </span>your_dicom_file<span class="w"> </span>-o<span class="w"> </span>bids_output_dir<span class="w"> </span>-f<span class="w"> </span>convertall<span class="w"> </span>-s<span class="w"> </span>number_of_the_subject<span class="w"> </span>-c<span class="w"> </span>none
</code></pre></div>
<p>The previous command does <strong>not</strong> convert any of your data, but it creates, within the output directory, a hidden folder, <code>.heudiconv</code>, containing a template of the script <code>heuristic.py</code> and a <code>dicominfo.tsv</code> which lists all the information about the dicom files necessary for specifing the heuristics. </p>
<div class="admonition note">
<p class="admonition-title">Check your dicoms</p>
<p>It is a good practice to extract your dicom files and check by yourself the file names to assess that they match with the names stored by heudiconv in the <code>dicominfo.tsv</code>.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Delete .heudiconv</p>
<p>Before running the actual BIDS convertion, make sure to delete the <strong>.heudiconv</strong> directory, otherwise the conversion will not produce a correct BIDS dataset.</p>
</div>
<p><strong>Step 2</strong></p>
<p>The following example represents a <code>heuristic.py</code> script taylored for a specific dataset. You can also use this template and adapt it to your own dataset.</p>
<div class="highlight"><span class="filename">Heudiconv heuristics</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="kn">from</span> <span class="nn">heudiconv.utils</span> <span class="kn">import</span> <span class="n">SeqInfo</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="n">lgr</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;heudiconv&quot;</span><span class="p">)</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="k">def</span> <span class="nf">create_key</span><span class="p">(</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>    <span class="n">template</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>    <span class="n">outtype</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;nii.gz&quot;</span><span class="p">,),</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>    <span class="n">annotation_classes</span><span class="p">:</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="sd">    This function allows you to create</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="sd">    the keys necessary to extract the files</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="sd">    that you want to convert.</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>    <span class="k">if</span> <span class="n">template</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">template</span><span class="p">:</span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Template must be a valid format string&quot;</span><span class="p">)</span>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a>    <span class="k">return</span> <span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">outtype</span><span class="p">,</span> <span class="n">annotation_classes</span><span class="p">)</span>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a>
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a><span class="k">def</span> <span class="nf">infotodict</span><span class="p">(</span>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a>    <span class="n">seqinfo</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">SeqInfo</span><span class="p">],</span>
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="kc">None</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Heuristic evaluator for determining which runs belong where</span>
<a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a>
<a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a><span class="sd">    allowed template fields - follow python string module:</span>
<a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a>
<a id="__codelineno-2-34" name="__codelineno-2-34" href="#__codelineno-2-34"></a><span class="sd">    item: index within category</span>
<a id="__codelineno-2-35" name="__codelineno-2-35" href="#__codelineno-2-35"></a><span class="sd">    subject: participant id</span>
<a id="__codelineno-2-36" name="__codelineno-2-36" href="#__codelineno-2-36"></a><span class="sd">    seqitem: run number during scanning</span>
<a id="__codelineno-2-37" name="__codelineno-2-37" href="#__codelineno-2-37"></a><span class="sd">    subindex: sub index within group</span>
<a id="__codelineno-2-38" name="__codelineno-2-38" href="#__codelineno-2-38"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-2-39" name="__codelineno-2-39" href="#__codelineno-2-39"></a>
<a id="__codelineno-2-40" name="__codelineno-2-40" href="#__codelineno-2-40"></a>    <span class="c1"># Create keys: This section is specific to each project</span>
<a id="__codelineno-2-41" name="__codelineno-2-41" href="#__codelineno-2-41"></a>    <span class="c1"># you need to create your own keys and the info dictionary</span>
<a id="__codelineno-2-42" name="__codelineno-2-42" href="#__codelineno-2-42"></a>
<a id="__codelineno-2-43" name="__codelineno-2-43" href="#__codelineno-2-43"></a>    <span class="n">t1w</span> <span class="o">=</span> <span class="n">create_key</span><span class="p">(</span><span class="s2">&quot;sub-</span><span class="si">{subject}</span><span class="s2">/anat/sub-</span><span class="si">{subject}</span><span class="s2">_acq-mprage_T1w&quot;</span><span class="p">)</span>
<a id="__codelineno-2-44" name="__codelineno-2-44" href="#__codelineno-2-44"></a>    <span class="n">task</span> <span class="o">=</span> <span class="n">create_key</span><span class="p">(</span><span class="s2">&quot;sub-</span><span class="si">{subject}</span><span class="s2">/func/sub-</span><span class="si">{subject}</span><span class="s2">_task-foodchoice_run-</span><span class="si">{item:01d}</span><span class="s2">_bold&quot;</span><span class="p">)</span>
<a id="__codelineno-2-45" name="__codelineno-2-45" href="#__codelineno-2-45"></a>    <span class="n">fmap_mag</span> <span class="o">=</span> <span class="n">create_key</span><span class="p">(</span><span class="s2">&quot;sub-</span><span class="si">{subject}</span><span class="s2">/fmap/sub-</span><span class="si">{subject}</span><span class="s2">_acq-grefieldmapping_magnitude&quot;</span><span class="p">)</span>
<a id="__codelineno-2-46" name="__codelineno-2-46" href="#__codelineno-2-46"></a>    <span class="n">fmap_phasediff</span> <span class="o">=</span> <span class="n">create_key</span><span class="p">(</span><span class="s2">&quot;sub-</span><span class="si">{subject}</span><span class="s2">/fmap/sub-</span><span class="si">{subject}</span><span class="s2">_acq-grefieldmapping_phasediff&quot;</span><span class="p">)</span>
<a id="__codelineno-2-47" name="__codelineno-2-47" href="#__codelineno-2-47"></a>    <span class="n">epi</span> <span class="o">=</span> <span class="n">create_key</span><span class="p">(</span><span class="s2">&quot;sub-</span><span class="si">{subject}</span><span class="s2">/fmap/sub-</span><span class="si">{subject}</span><span class="s2">_dir-AP-run-</span><span class="si">{item:01d}</span><span class="s2">_epi&quot;</span><span class="p">)</span>
<a id="__codelineno-2-48" name="__codelineno-2-48" href="#__codelineno-2-48"></a>
<a id="__codelineno-2-49" name="__codelineno-2-49" href="#__codelineno-2-49"></a>
<a id="__codelineno-2-50" name="__codelineno-2-50" href="#__codelineno-2-50"></a>    <span class="c1"># the dictionary info must contain your keys</span>
<a id="__codelineno-2-51" name="__codelineno-2-51" href="#__codelineno-2-51"></a>    <span class="n">info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="kc">None</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span> 
<a id="__codelineno-2-52" name="__codelineno-2-52" href="#__codelineno-2-52"></a>            <span class="n">t1w</span><span class="p">:</span> <span class="p">[],</span>
<a id="__codelineno-2-53" name="__codelineno-2-53" href="#__codelineno-2-53"></a>            <span class="n">task</span><span class="p">:</span> <span class="p">[],</span>
<a id="__codelineno-2-54" name="__codelineno-2-54" href="#__codelineno-2-54"></a>            <span class="n">fmap</span><span class="p">:</span> <span class="p">[],</span>
<a id="__codelineno-2-55" name="__codelineno-2-55" href="#__codelineno-2-55"></a>            <span class="n">epi</span><span class="p">:</span> <span class="p">[]</span>
<a id="__codelineno-2-56" name="__codelineno-2-56" href="#__codelineno-2-56"></a>            <span class="p">}</span>
<a id="__codelineno-2-57" name="__codelineno-2-57" href="#__codelineno-2-57"></a>
<a id="__codelineno-2-58" name="__codelineno-2-58" href="#__codelineno-2-58"></a>    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">seqinfo</span><span class="p">:</span>
<a id="__codelineno-2-59" name="__codelineno-2-59" href="#__codelineno-2-59"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-2-60" name="__codelineno-2-60" href="#__codelineno-2-60"></a><span class="sd">        The namedtuple `s` contains the following fields:</span>
<a id="__codelineno-2-61" name="__codelineno-2-61" href="#__codelineno-2-61"></a>
<a id="__codelineno-2-62" name="__codelineno-2-62" href="#__codelineno-2-62"></a><span class="sd">        * total_files_till_now</span>
<a id="__codelineno-2-63" name="__codelineno-2-63" href="#__codelineno-2-63"></a><span class="sd">        * example_dcm_file</span>
<a id="__codelineno-2-64" name="__codelineno-2-64" href="#__codelineno-2-64"></a><span class="sd">        * series_id</span>
<a id="__codelineno-2-65" name="__codelineno-2-65" href="#__codelineno-2-65"></a><span class="sd">        * dcm_dir_name</span>
<a id="__codelineno-2-66" name="__codelineno-2-66" href="#__codelineno-2-66"></a><span class="sd">        * unspecified2</span>
<a id="__codelineno-2-67" name="__codelineno-2-67" href="#__codelineno-2-67"></a><span class="sd">        * unspecified3</span>
<a id="__codelineno-2-68" name="__codelineno-2-68" href="#__codelineno-2-68"></a><span class="sd">        * dim1</span>
<a id="__codelineno-2-69" name="__codelineno-2-69" href="#__codelineno-2-69"></a><span class="sd">        * dim2</span>
<a id="__codelineno-2-70" name="__codelineno-2-70" href="#__codelineno-2-70"></a><span class="sd">        * dim3</span>
<a id="__codelineno-2-71" name="__codelineno-2-71" href="#__codelineno-2-71"></a><span class="sd">        * dim4</span>
<a id="__codelineno-2-72" name="__codelineno-2-72" href="#__codelineno-2-72"></a><span class="sd">        * TR</span>
<a id="__codelineno-2-73" name="__codelineno-2-73" href="#__codelineno-2-73"></a><span class="sd">        * TE</span>
<a id="__codelineno-2-74" name="__codelineno-2-74" href="#__codelineno-2-74"></a><span class="sd">        * protocol_name</span>
<a id="__codelineno-2-75" name="__codelineno-2-75" href="#__codelineno-2-75"></a><span class="sd">        * is_motion_corrected</span>
<a id="__codelineno-2-76" name="__codelineno-2-76" href="#__codelineno-2-76"></a><span class="sd">        * is_derived</span>
<a id="__codelineno-2-77" name="__codelineno-2-77" href="#__codelineno-2-77"></a><span class="sd">        * patient_id</span>
<a id="__codelineno-2-78" name="__codelineno-2-78" href="#__codelineno-2-78"></a><span class="sd">        * study_description</span>
<a id="__codelineno-2-79" name="__codelineno-2-79" href="#__codelineno-2-79"></a><span class="sd">        * referring_physician_name</span>
<a id="__codelineno-2-80" name="__codelineno-2-80" href="#__codelineno-2-80"></a><span class="sd">        * series_description</span>
<a id="__codelineno-2-81" name="__codelineno-2-81" href="#__codelineno-2-81"></a><span class="sd">        * image_type</span>
<a id="__codelineno-2-82" name="__codelineno-2-82" href="#__codelineno-2-82"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-2-83" name="__codelineno-2-83" href="#__codelineno-2-83"></a>
<a id="__codelineno-2-84" name="__codelineno-2-84" href="#__codelineno-2-84"></a>        <span class="c1"># The following conditional statements constitute</span>
<a id="__codelineno-2-85" name="__codelineno-2-85" href="#__codelineno-2-85"></a>        <span class="c1"># the core of the heuristics. </span>
<a id="__codelineno-2-86" name="__codelineno-2-86" href="#__codelineno-2-86"></a>        <span class="c1"># Modify them according to the dicom file names and </span>
<a id="__codelineno-2-87" name="__codelineno-2-87" href="#__codelineno-2-87"></a>        <span class="c1"># other features (like data size) that </span>
<a id="__codelineno-2-88" name="__codelineno-2-88" href="#__codelineno-2-88"></a>        <span class="c1"># can help select the correct files</span>
<a id="__codelineno-2-89" name="__codelineno-2-89" href="#__codelineno-2-89"></a>
<a id="__codelineno-2-90" name="__codelineno-2-90" href="#__codelineno-2-90"></a>    <span class="k">if</span> <span class="s2">&quot;t1_mpr&quot;</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">protocol_name</span><span class="p">:</span>
<a id="__codelineno-2-91" name="__codelineno-2-91" href="#__codelineno-2-91"></a>        <span class="n">info</span><span class="p">[</span><span class="n">t1w</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">series_id</span><span class="p">)</span>
<a id="__codelineno-2-92" name="__codelineno-2-92" href="#__codelineno-2-92"></a>    <span class="k">elif</span> <span class="s1">&#39;fMRI_SMS2_2.2iso_66sl_TR2_run&#39;</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">protocol_name</span> <span class="ow">and</span> <span class="n">s</span><span class="o">.</span><span class="n">dim4</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
<a id="__codelineno-2-93" name="__codelineno-2-93" href="#__codelineno-2-93"></a>        <span class="n">info</span><span class="p">[</span><span class="n">task</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">series_id</span><span class="p">)</span>
<a id="__codelineno-2-94" name="__codelineno-2-94" href="#__codelineno-2-94"></a>    <span class="k">elif</span> <span class="s1">&#39;field_mapping&#39;</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">protocol_name</span> <span class="ow">and</span> <span class="n">s</span><span class="o">.</span><span class="n">dim3</span> <span class="o">==</span> <span class="mi">132</span><span class="p">:</span>
<a id="__codelineno-2-95" name="__codelineno-2-95" href="#__codelineno-2-95"></a>        <span class="n">info</span><span class="p">[</span><span class="n">fmap_mag</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">series_id</span><span class="p">)</span>
<a id="__codelineno-2-96" name="__codelineno-2-96" href="#__codelineno-2-96"></a>    <span class="k">elif</span> <span class="s1">&#39;field_mapping&#39;</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">protocol_name</span> <span class="ow">and</span> <span class="n">s</span><span class="o">.</span><span class="n">dim3</span> <span class="o">==</span> <span class="mi">66</span><span class="p">:</span>
<a id="__codelineno-2-97" name="__codelineno-2-97" href="#__codelineno-2-97"></a>        <span class="n">info</span><span class="p">[</span><span class="n">fmap_phasediff</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">series_id</span><span class="p">)</span>
<a id="__codelineno-2-98" name="__codelineno-2-98" href="#__codelineno-2-98"></a>    <span class="k">elif</span> <span class="s1">&#39;EPI&#39;</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">protocol_name</span><span class="p">:</span>
<a id="__codelineno-2-99" name="__codelineno-2-99" href="#__codelineno-2-99"></a>        <span class="n">info</span><span class="p">[</span><span class="n">epi</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">series_id</span><span class="p">)</span>
<a id="__codelineno-2-100" name="__codelineno-2-100" href="#__codelineno-2-100"></a>
<a id="__codelineno-2-101" name="__codelineno-2-101" href="#__codelineno-2-101"></a>
<a id="__codelineno-2-102" name="__codelineno-2-102" href="#__codelineno-2-102"></a>    <span class="k">return</span> <span class="n">info</span>
</code></pre></div>
<p>The essential sections of the script that you need to modify are the <strong>keys</strong> and the actual <strong>heuristics</strong>, keep in mind that you have to modify keys and heuristics according to your dataset:</p>
<ul>
<li>
<p><strong>Keys:</strong> In the <code>dicominfo.tsv</code> (in <code>.heudiconv</code>) file you find the exact naming of the dicom files, you need to go through the list of files and decide which of them are important for your analysis.</b><br />
Once you have made your decision, you can create the proper keys by following the naming conventions explained in the <a href="https://bids-standard.github.io/bids-starter-kit/folders_and_files/files.html">BIDS tutorial</a>. Keys create the BIDS compliant file names and structure.</p>
<ul>
<li>
<p>Start with your anatomical images which all go into the <code>anat</code> folder:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">t1w</span> <span class="o">=</span> <span class="n">create_key</span><span class="p">(</span><span class="s2">&quot;sub-</span><span class="si">{subject}</span><span class="s2">/anat/sub-</span><span class="si">{subject}</span><span class="s2">_acq-mprage_T1w&quot;</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>The <code>sub-{subject}/</code> folder where <code>{subject}</code> is a placeholder that heudiconv fills in with the correct subject ID.</li>
<li>The folder <code>anat/</code> is dedicated to all the anatomical images.</li>
<li>In <code>acq-&lt;label&gt;</code> you provide the type of acquisition e.g. <code>mprage</code> (this is not mandatory).</li>
<li>The <code>Tw1</code> suffix is the standard name for T1 weighted images. Keep in mind that you might have have different anatomical images.  </li>
</ul>
</li>
<li>
<p>Set up the functional images which go into the <code>func</code> folder.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">task</span> <span class="o">=</span> <span class="n">create_key</span><span class="p">(</span><span class="s2">&quot;sub-</span><span class="si">{subject}</span><span class="s2">/func/sub-</span><span class="si">{subject}</span><span class="s2">_task-foodchoice_run-</span><span class="si">{item:01d}</span><span class="s2">_bold&quot;</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>As for the anatomical image you need to add the <code>sub-{subject}/</code> folder.</li>
<li>The <code>func</code> folder is dedicated to the functional images.</li>
<li>The <code>task-&lt;taskname&gt;</code> indicates the name of the task.</li>
<li><code>_run-</code> is just a place holder for the run number that heudiconv fills in automatically.</li>
<li>The <code>bold</code> suffix indicates the type of functional file we are dealing with.</li>
</ul>
</li>
<li>
<p>Set up the field maps images which go into the <code>fmap</code> folder. The previous anatomical and functional images
  are rather standard for fMRI experiments, the field maps can be different and sometimes absent.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">fmap_mag</span> <span class="o">=</span> <span class="n">create_key</span><span class="p">(</span><span class="s2">&quot;sub-</span><span class="si">{subject}</span><span class="s2">/fmap/sub-</span><span class="si">{subject}</span><span class="s2">_acq-grefieldmapping_magnitude&quot;</span><span class="p">)</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">fmap_phasediff</span> <span class="o">=</span> <span class="n">create_key</span><span class="p">(</span><span class="s2">&quot;sub-</span><span class="si">{subject}</span><span class="s2">/fmap/sub-</span><span class="si">{subject}</span><span class="s2">_acq-grefieldmapping_phasediff&quot;</span><span class="p">)</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">epi</span> <span class="o">=</span> <span class="n">create_key</span><span class="p">(</span><span class="s2">&quot;sub-</span><span class="si">{subject}</span><span class="s2">/fmap/sub-</span><span class="si">{subject}</span><span class="s2">_dir-AP-run-</span><span class="si">{item:01d}</span><span class="s2">_epi&quot;</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>As for the other images you set up the subject folder <code>sub-{subject}</code>.</li>
<li>The <code>fmap</code> folder is dedicated to the fieldmap related images.</li>
<li>In this particular case for <code>fmap_mag</code> and <code>fmap_phasediff</code> we specified the <code>_acq-&lt;label&gt;_</code> which changes for different cases.</li>
<li>The suffixes <code>magnitude</code> and <code>phasediff</code> and <code>epi</code> are mandatory for these types of fieldmap images, please refer to the <a href="https://bids-specification.readthedocs.io/en/stable/modality-specific-files/magnetic-resonance-imaging-data.html#fieldmap-data">official page</a> for all the possible cases.</li>
<li>The <code>_dir-AP_</code> indicates the <strong>Phase-Encoding direction</strong> of the <code>EPI</code> image, please refer to the <a href="https://bids-specification.readthedocs.io/en/stable/appendices/entities.html#dir">official page</a> for further information.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Heuristics:</strong> Now we need to create a few basic rules to tell heudiconv which files to extract.</p>
<p>In the following example we simply match the name of a <code>dicom</code> we would like to include in the BIDS conversion with the file names contained in <code>s.protocol_name</code>, if there is a match we add the file in the <code>info</code> dictionary.</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">if</span> <span class="s2">&quot;t1_mpr&quot;</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">protocol_name</span><span class="p">:</span> <span class="c1"># name matching</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    <span class="n">info</span><span class="p">[</span><span class="n">t1w</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">series_id</span><span class="p">)</span> <span class="c1"># append to the dictionary</span>
</code></pre></div>
Sometimes a file name matching is not enough to extract a the correct file, so we can combine more rules like the following cases, in which we match the file name and the file size.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">elif</span> <span class="s1">&#39;fMRI_SMS2_2.2iso_66sl_TR2_run&#39;</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">protocol_name</span> <span class="ow">and</span> <span class="n">s</span><span class="o">.</span><span class="n">dim4</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    <span class="n">info</span><span class="p">[</span><span class="n">task</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">series_id</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">elif</span> <span class="s1">&#39;field_mapping&#39;</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">protocol_name</span> <span class="ow">and</span> <span class="n">s</span><span class="o">.</span><span class="n">dim3</span> <span class="o">==</span> <span class="mi">132</span><span class="p">:</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>    <span class="n">info</span><span class="p">[</span><span class="n">fmap_mag</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">series_id</span><span class="p">)</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="k">elif</span> <span class="s1">&#39;field_mapping&#39;</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">protocol_name</span> <span class="ow">and</span> <span class="n">s</span><span class="o">.</span><span class="n">dim3</span> <span class="o">==</span> <span class="mi">66</span><span class="p">:</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    <span class="n">info</span><span class="p">[</span><span class="n">fmap_phasediff</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">series_id</span><span class="p">)</span>
</code></pre></div>
<p>As you might guess you need to create rules on a case by case basis.</p>
</li>
</ul>
<p><strong>Step 3</strong></p>
<p>Now you just need to run heudiconv for the actual conversion with the following line, please for further information about heudiconv specs visit the software page or type <code>heudiconv --help</code> in the terminal:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>heudiconv<span class="w"> </span>--files<span class="w"> </span>&lt;file_containing_dicoms&gt;<span class="w"> </span>-o<span class="w"> </span>&lt;directory_for_bids/&gt;<span class="w"> </span>-f<span class="w"> </span>&lt;heuristic.py&gt;<span class="w"> </span>-s<span class="w"> </span>&lt;subject_number&gt;<span class="w"> </span>-c<span class="w"> </span>dcm2niix<span class="w"> </span>-b<span class="w"> </span>--overwrite
</code></pre></div>
<p>The following tree represents the result of the BIDS conversion. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>    .
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    ├── CHANGES
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    ├── dataset_description.json
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>    ├── participants.json
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>    ├── participants.tsv
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>    ├── README
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>    ├── scans.json
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>    ├── sub-01
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>    │   ├── anat
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>    │   │   ├── sub-01_acq-mprage_T1w.json
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>    │   │   └── sub-01_acq-mprage_T1w.nii.gz
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>    │   ├── fmap
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>    │   │   ├── sub-01_acq-grefieldmapping_magnitude1.json
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>    │   │   ├── sub-01_acq-grefieldmapping_magnitude1.nii.gz
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>    │   │   ├── sub-01_acq-grefieldmapping_magnitude2.json
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>    │   │   ├── sub-01_acq-grefieldmapping_magnitude2.nii.gz
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a>    │   │   ├── sub-01_acq-grefieldmapping_phasediff.json
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>    │   │   ├── sub-01_acq-grefieldmapping_phasediff.nii.gz
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>    │   │   ├── sub-01_dir-AP_run-1_epi.json
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>    │   │   └── sub-01_dir-AP_run-1_epi.nii.gz
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a>    │   ├── func
<a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a>    │   │   ├── sub-01_task-foodchoice_run-1_bold.json
<a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a>    │   │   ├── sub-01_task-foodchoice_run-1_bold.nii.gz
<a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a>    │   │   ├── sub-01_task-foodchoice_run-1_events.tsv
<a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a>    │   │   ├── sub-01_task-foodchoice_run-2_bold.json
<a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a>    │   │   ├── sub-01_task-foodchoice_run-2_bold.nii.gz
<a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a>    │   │   ├── sub-01_task-foodchoice_run-2_events.tsv
<a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a>    │   │   ├── sub-01_task-foodchoice_run-3_bold.json
<a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a>    │   │   ├── sub-01_task-foodchoice_run-3_bold.nii.gz
<a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a>    │   │   ├── sub-01_task-foodchoice_run-3_events.tsv
<a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a>    │   │   ├── sub-01_task-foodchoice_run-4_bold.json
<a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a>    │   │   ├── sub-01_task-foodchoice_run-4_bold.nii.gz
<a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a>    │   │   ├── sub-01_task-foodchoice_run-4_events.tsv
<a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a>    │   │   ├── sub-01_task-foodchoice_run-5_bold.json
<a id="__codelineno-10-35" name="__codelineno-10-35" href="#__codelineno-10-35"></a>    │   │   ├── sub-01_task-foodchoice_run-5_bold.nii.gz
<a id="__codelineno-10-36" name="__codelineno-10-36" href="#__codelineno-10-36"></a>    │   │   └── sub-01_task-foodchoice_run-5_events.tsv
<a id="__codelineno-10-37" name="__codelineno-10-37" href="#__codelineno-10-37"></a>    │   └── sub-01_scans.tsv
<a id="__codelineno-10-38" name="__codelineno-10-38" href="#__codelineno-10-38"></a>    └── task-foodchoice_bold.json
</code></pre></div>
<p>Note that heudiconv creates also <code>events.tsv</code>, tabular files containing the header: <code>onset  duration trial_type response_time   stim_file</code>. Your task is to complete these files with the logs acquired during the neural recording according to the bids conventions.
Additionally you should create <code>events.json</code> files which contain the description of each column included in <code>events.tsv</code>.</p>
</div>
<div class="tabbed-block">
<h3 id="eeg-bids-recommended-formats">EEG BIDS recommended formats</h3>
<p>Given the variety of EEG data formats, BIDS recommends two main formats (we also strongly suggest to use these two formats):</p>
<ul>
<li>European format: <code>.edf</code></li>
<li>BrainVision format: <code>.vhdr</code>, <code>.vmrk</code>, <code>.eeg</code></li>
</ul>
<p>Other BIDS accepted formats, although not recommended by BIDS, are Biosemi: <code>.bdf</code> and EEGLAB: <code>.fdt</code>, <code>.set</code>.</p>
<h3 id="eeg-conversion-with-fieldtrip-matlab-based">EEG conversion with Fieldtrip (Matlab based)</h3>
<p>The following code has been adapted from an example provided in the <a href="https://www.fieldtriptoolbox.org/example/bids_eeg/">fieldtrip page</a>, for further information read the official documentation.</p>
<ul>
<li><code>sub</code> is the subject number as integer, <code>runs</code> is a vector containing the run numbers.</li>
<li><code>cfg</code>: It is the general <code>struct</code> used by fieldtrip to provide the information to <code>data2bids</code> that is the actual fieldtrip converter.
<code>cfg</code> offers the possibility to provide the information also for the metadata, please check the official documentation.</li>
<li><code>cfg.method</code>: This field defines the kind of action you want to take with the converter. In case your eeg data type is not recommedended by BIDS, meaning is neither the BrainVision nor the European format, it is set to <code>'convert'</code> and the data will be converted to the BrainVision format. Otherwise it is set to <code>'copy'</code> and the data will be onyl copied and restructured according to BIDS.</li>
</ul>
<p>This function considers eeg data split into different runs, only to exemplify a specific case. Often raw data consist of one single recording per subject.</p>
<div class="highlight"><span class="filename">Fieldtrip bids conversion</span><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">function</span><span class="w"> </span>cfg<span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nf">eeg2bids</span><span class="p">(</span>sub, runs, datadir, ext<span class="p">)</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="c">%EEG2BIDS bids fieldtrip convertion </span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="c">%   sub  = integer </span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="c">%   runs = vector od integers </span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="c">%   datadir = data directory</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="c">%   ext     = data extension (.bdf, .edf etc...)</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="k">for</span><span class="w"> </span><span class="nb">run</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">runs</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="w">    </span><span class="n">cfg</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">strcmp</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;.vhdr&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">strcmp</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;.edf&#39;</span><span class="p">)</span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="w">        </span><span class="n">cfg</span><span class="p">.</span><span class="n">method</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;copy&#39;</span><span class="p">;</span>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="w">    </span><span class="k">else</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="w">        </span><span class="n">cfg</span><span class="p">.</span><span class="n">method</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;convert&#39;</span><span class="p">;</span><span class="w"> </span><span class="c">% this method specify whether you want to convert data or copy and restructure them</span>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="w">    </span><span class="k">end</span>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="w">    </span><span class="n">cfg</span><span class="p">.</span><span class="n">datatype</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;eeg&#39;</span><span class="p">;</span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="w">    </span><span class="c">% specify the input file name</span>
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a><span class="w">    </span><span class="n">cfg</span><span class="p">.</span><span class="n">dataset</span><span class="w">   </span><span class="p">=</span><span class="w"> </span><span class="nb">fullfile</span><span class="p">(</span><span class="n">datadir</span><span class="p">,</span><span class="w"> </span><span class="nb">join</span><span class="p">([</span><span class="s">&#39;sub-&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">num2str</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;%02.f&#39;</span><span class="p">),</span><span class="w"> </span><span class="s">&#39;_run_&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">num2str</span><span class="p">(</span><span class="nb">run</span><span class="p">),</span><span class="w"> </span><span class="n">ext</span><span class="p">],</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="p">));</span>
<a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>
<a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a><span class="w">    </span><span class="c">% specify the output directory</span>
<a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a><span class="w">    </span><span class="n">cfg</span><span class="p">.</span><span class="n">bidsroot</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;rawdata&#39;</span><span class="p">;</span>
<a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a><span class="w">    </span><span class="n">cfg</span><span class="p">.</span><span class="n">run</span><span class="w">       </span><span class="p">=</span><span class="w"> </span><span class="nb">run</span><span class="p">;</span>
<a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a><span class="w">    </span><span class="n">cfg</span><span class="p">.</span><span class="n">sub</span><span class="w">       </span><span class="p">=</span><span class="w"> </span><span class="nb">num2str</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;%02.f&#39;</span><span class="p">);</span>
<a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a>
<a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a><span class="w">    </span><span class="c">% specify the information for the scans.tsv file</span>
<a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a><span class="w">    </span><span class="n">cfg</span><span class="p">.</span><span class="n">scans</span><span class="p">.</span><span class="n">acq_time</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">datestr</span><span class="p">(</span><span class="nb">now</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;yyyy-mm-ddThh:MM:SS&#39;</span><span class="p">);</span>
<a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a>
<a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a><span class="w">    </span><span class="c">% specify some general information that will be added to the eeg.json file</span>
<a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a><span class="w">    </span><span class="n">cfg</span><span class="p">.</span><span class="n">InstitutionName</span><span class="w">             </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;OvGU&#39;</span><span class="p">;</span>
<a id="__codelineno-11-32" name="__codelineno-11-32" href="#__codelineno-11-32"></a><span class="w">    </span><span class="n">cfg</span><span class="p">.</span><span class="n">InstitutionalDepartmentName</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;Intitute of Psychology&#39;</span><span class="p">;</span>
<a id="__codelineno-11-33" name="__codelineno-11-33" href="#__codelineno-11-33"></a><span class="w">    </span><span class="n">cfg</span><span class="p">.</span><span class="n">InstitutionAddress</span><span class="w">          </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;Intitute of Psychology, Universitaetsplatz, Magdeburg&#39;</span><span class="p">;</span>
<a id="__codelineno-11-34" name="__codelineno-11-34" href="#__codelineno-11-34"></a>
<a id="__codelineno-11-35" name="__codelineno-11-35" href="#__codelineno-11-35"></a><span class="w">    </span><span class="c">% provide the task name (used in the BIDS files) and long description of the task</span>
<a id="__codelineno-11-36" name="__codelineno-11-36" href="#__codelineno-11-36"></a><span class="w">    </span><span class="n">cfg</span><span class="p">.</span><span class="n">TaskName</span><span class="w">        </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;guessmeaning&#39;</span><span class="p">;</span>
<a id="__codelineno-11-37" name="__codelineno-11-37" href="#__codelineno-11-37"></a><span class="w">    </span><span class="n">cfg</span><span class="p">.</span><span class="n">TaskDescription</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;Subjects were asked to derive the meaning of pseudowords from the context&#39;</span><span class="p">;</span>
<a id="__codelineno-11-38" name="__codelineno-11-38" href="#__codelineno-11-38"></a>
<a id="__codelineno-11-39" name="__codelineno-11-39" href="#__codelineno-11-39"></a><span class="w">    </span><span class="c">% these are EEG specific</span>
<a id="__codelineno-11-40" name="__codelineno-11-40" href="#__codelineno-11-40"></a><span class="w">    </span><span class="n">cfg</span><span class="p">.</span><span class="n">eeg</span><span class="p">.</span><span class="n">PowerLineFrequency</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">50</span><span class="p">;</span><span class="w">   </span><span class="c">% insert the power line frequency</span>
<a id="__codelineno-11-41" name="__codelineno-11-41" href="#__codelineno-11-41"></a><span class="w">    </span><span class="n">cfg</span><span class="p">.</span><span class="n">eeg</span><span class="p">.</span><span class="n">EEGReference</span><span class="w">       </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;average&#39;</span><span class="p">;</span>
<a id="__codelineno-11-42" name="__codelineno-11-42" href="#__codelineno-11-42"></a>
<a id="__codelineno-11-43" name="__codelineno-11-43" href="#__codelineno-11-43"></a><span class="w">    </span><span class="n">data2bids</span><span class="p">(</span><span class="n">cfg</span><span class="p">);</span>
<a id="__codelineno-11-44" name="__codelineno-11-44" href="#__codelineno-11-44"></a><span class="k">end</span>
<a id="__codelineno-11-45" name="__codelineno-11-45" href="#__codelineno-11-45"></a><span class="k">end</span>
</code></pre></div>
<p>By running the previous script you should obtain the following BIDS dataset</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>rawdata
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>├── dataset_description.json
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>├── participants.tsv
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>├── README
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>└── sub-20
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>    ├── eeg
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>    │   ├── sub-20_task-guessmeaning_run-1_channels.tsv
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>    │   ├── sub-20_task-guessmeaning_run-1_eeg.eeg
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>    │   ├── sub-20_task-guessmeaning_run-1_eeg.json
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>    │   ├── sub-20_task-guessmeaning_run-1_eeg.vhdr
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>    │   ├── sub-20_task-guessmeaning_run-1_eeg.vmrk
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>    │   ├── sub-20_task-guessmeaning_run-1_events.tsv
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>    │   ├── sub-20_task-guessmeaning_run-2_channels.tsv
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>    │   ├── sub-20_task-guessmeaning_run-2_eeg.eeg
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>    │   ├── sub-20_task-guessmeaning_run-2_eeg.json
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>    │   ├── sub-20_task-guessmeaning_run-2_eeg.vhdr
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>    │   ├── sub-20_task-guessmeaning_run-2_eeg.vmrk
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>    │   └── sub-20_task-guessmeaning_run-2_events.tsv
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>    └── sub-20_scans.tsv
</code></pre></div>
<h3 id="eeg-conversion-with-mne-python-based">EEG conversion with MNE (Python based)</h3>
</div>
<div class="tabbed-block">
<h3 id="behavioral-data">Behavioral data</h3>
<p>BIDS for behavioral data follows conventions similar to those used for the <code>events.tsv</code> files with neural recordings. 
We recommend to read carefully the <a href="https://bids-specification.readthedocs.io/en/stable/modality-specific-files/behavioral-experiments.html#behavioral-experiments-with-no-neural-recordings">description</a> provided in the BIDS website.</p>
<div class="admonition note">
<p class="admonition-title">Behavioral data general rules</p>
<ul>
<li><strong>What kind of data:</strong> Any behavioral measures (with no concurrent neural recordings).</li>
<li><strong>File types:</strong> Tabular data as <code>.tsv</code> with the following header <code>trial response response_time stim_file</code> (further entries can be added please refer to the BIDS page above). Metadata as <code>.json</code> files.  </li>
<li><strong>Where:</strong> Data must go under the <code>&lt;beh&gt;/</code> folder.</li>
<li><strong>How:</strong> Data must have the following format:</b><br />
<code>&lt;matches&gt;_beh.tsv</code></b><br />
<code>&lt;matches&gt;_beh.json</code></b><br />
              where <code>&lt;matches&gt;</code> can be <code>sub-012_task-mytaskname</code>. In case you have multiple sessions and runs your file might be:<code>sub-012_ses-1_task-mytaskname_run-1-beh.tsv</code> and  the relative metadata <code>sub-012_ses-1_task-mytaskname_run-1-beh.json</code>.</li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Save your behavioral data already in BIDS</p>
<p>It is convenient to save your raw behavioral files as BIDS compliant. </p>
</div>
<p>Given the large variety of structures and formats that researchers use for their behavioral experiments, we do not provide an example.</p>
<h3 id="physiological-data">Physiological data</h3>
<p>We recommend to read the <a href="https://bids-specification.readthedocs.io/en/stable/modality-specific-files/physiological-and-other-continuous-recordings.html">dedicated page</a> in the BIDS website. </p>
<div class="admonition note">
<p class="admonition-title">Physio data general rules</p>
<ul>
<li><strong>What kind of data:</strong> Cardiac, respiratory and other continuous recordings</li>
<li><strong>File types:</strong> Continuous recordings as compressed files <code>.tsv.gz</code> (no header). Metadata as <code>.json</code> files.  </li>
<li><strong>Where:</strong> Data can go under different <code>&lt;datatype&gt;/</code> folders, such as <code>func</code>, <code>anat</code>, <code>dwi</code>, <code>meg</code>, <code>eeg</code>, <code>ieeg</code>, or <code>beh</code></li>
<li><strong>How:</strong> Data must have the following format:</b><br />
<code>&lt;matches&gt;[_recording-&lt;label&gt;]_physio.tsv.gz</code>
                <code>&lt;matches&gt;[_recording-&lt;label&gt;]_physio.json</code>
            where <code>&lt;matches&gt;</code> can be <code>sub-012_task-mytaskname</code> and <code>_recoding-&lt;label&gt;</code> can be used to distinguish between two or more type of recordings e.g. <code>recording-breathing</code> and <code>recording-eyetracking</code>. In case you have multiple sessions and runs your file might be: <code>sub-012_ses-1_task-mytaskname_run-1-breathing_physio.tsv.gz</code> and the relative metadata <code>sub-012_ses-1_task-mytaskname_run-1-breathing_physio.json</code>. </li>
</ul>
</div>
</div>
<div class="tabbed-block">
<p>Coming soon...</p>
</div>
</div>
</div>
<h2 id="populating-metadata-files">Populating metadata files</h2>
<p>TODO</p>
<h2 id="validate-your-bids-dataset">Validate your BIDS dataset</h2>
<p>After you have accomplished the BIDS conversion, the last step is to validate your dataset. Keep in mind that this step is very important to ensure that your dataset actually complies with BIDS.</p>
<p>The validation can be done on Cecile by using <a href="https://github.com/bids-standard/bids-validator"><code>bids-validator</code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Periodical validation checks</p>
<p>In order to keep the minimal standards on Cecile, there will be periodical BIDS validation on your dataset, in case a dataset is not valid you will receive an email asking to make your dataset BIDS compliant. </p>
</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "content.tooltips", "content.tabs.link", "navigation.top", "content.code.copy", "content.code.select"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.525ec568.min.js"></script>
      
    
  </body>
</html>